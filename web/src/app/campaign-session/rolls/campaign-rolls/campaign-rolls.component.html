<p-panel header="Rolls">
  <ng-container class="p-grid p-nogutter" style="overflow: scroll; height: 100%; padding-bottom: 12px">
    <div *ngFor="let result of rolls; let i = index" style="padding-bottom: 12px;">
      <p-card [styleClass]="i === 0 ? 'last-roll' : null">
        <p-header class="p-grid p-align-center">
          <div class="p-col-4" style="font-weight: bold">{{result.creatureName}}</div>
          <div class="p-col-4">{{result.property}}</div>
          <div class="p-col-4 p-grid p-nogutter" *ngIf="result.difficulty">
            <div class="p-col-4" pTooltip="Difficulty">{{result.difficulty}}</div>
            <div class="p-col-2">/</div>
            <div class="p-col-4" pTooltip="Complexity">{{result.complexity}}</div>
          </div>
        </p-header>
        <div  class="p-grid p-align-center">
          <i class="fas fa-check success" *ngIf="result.success"></i>
          <i class="fas fa-times fail" *ngIf="!result.success"></i>
          <div *ngFor="let roll of result.rolls" class="p-col">
            <div *ngIf="roll.success && !roll.criticalSuccess" class="success-dice-roll" (mouseenter)="selectRoll(roll); rollOverlay.show($event)" (mouseleave)="rollOverlay.hide()">{{roll.dice + roll.bonus}}</div>
            <div *ngIf="roll.criticalSuccess" class="critical-success-dice-roll success-dice-roll" (mouseenter)="selectRoll(roll); rollOverlay.show($event)" (mouseleave)="rollOverlay.hide()">{{roll.dice + roll.bonus}}</div>
            <div *ngIf="roll.criticalFailure" class="critical-failure-dice-roll dice-roll" (mouseenter)="selectRoll(roll); rollOverlay.show($event)" (mouseleave)="rollOverlay.hide()">{{roll.dice + roll.bonus}}</div>
            <div *ngIf="!roll.criticalFailure && !roll.success && !roll.criticalSuccess" class="dice-roll" (mouseenter)="selectRoll(roll); rollOverlay.show($event)" (mouseleave)="rollOverlay.hide()">{{roll.dice + roll.bonus}}</div>
          </div>
        </div>
      </p-card>
    </div>

  </ng-container>
</p-panel>

<p-overlayPanel #rollOverlay  [showTransitionOptions]="'0ms'" [hideTransitionOptions]="'0ms'">
  <ng-template pTemplate>
    <div>
      Roll: {{selectedRoll.dice}}
    </div>
    <div>
      Bonus: {{selectedRoll.bonus}}
    </div>
  </ng-template>
</p-overlayPanel>
